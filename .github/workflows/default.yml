name: OnPush-Script

on: pull_request

jobs:
    onpush-scripts:
        name: PR scripts
        runs-on: ${{ matrix.platform }}
        strategy:
            matrix:
                platform: [ Red ]
        steps:
            - name: Checkout Firewalla
              uses: actions/checkout@v2

            - name: Checkout push scripts
              uses: actions/checkout@v2
              with:
                  repository: firewalla/fireaction
                  ref: main
                  token: ${{ secrets.ACCESS_TOKEN }}
                  path: fireaction

            - name: Sanity check
              run: scripts/sanity_check.sh

            - name: Run PR scripts
              run: run-parts scripts/pr/
              working-directory: fireaction

